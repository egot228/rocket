# Crash Game Telegram Mini App

–ú–∏–Ω–∏-–∏–≥—Ä–∞ —Ñ–æ—Ä–º–∞—Ç–∞ Crash —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –æ–±—â–∏–º–∏ —Ä–∞—É–Ω–¥–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤, –±–∞–ª–∞–Ω—Å–∞–º–∏ –≤ **TON** –∏ **Telegram Stars**, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –∞–¥–º–∏–Ω-–≤—ã–¥–∞—á–µ–π.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üöÄ –û–±—â–∏–π —Ä–∞—É–Ω–¥ –¥–ª—è –≤—Å–µ—Ö: —Ñ–∞–∑—ã `betting -> running -> crashed`.
- üõ∞Ô∏è –ü–æ–ª—ë—Ç —Ä–∞–∫–µ—Ç—ã –ø–æ —Å—Ü–µ–Ω–µ: –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∞—Å—Ç—ë—Ç —Å–Ω–∞—á–∞–ª–∞ –º–µ–¥–ª–µ–Ω–Ω–æ, –∑–∞—Ç–µ–º —Å —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º.
- üí∏ –ö–Ω–æ–ø–∫–∞ ¬´–ó–∞–±—Ä–∞—Ç—å¬ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Å—É–º–º—É –≤—ã–∏–≥—Ä—ã—à–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
- üíé –î–≤–∞ –±–∞–ª–∞–Ω—Å–∞: TON –∏ Stars.
- ‚ûï –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —á–µ—Ä–µ–∑ API.
- üõ°Ô∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: –≤—ã–¥–∞—á–∞ TON/Stars –ø–æ admin key.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
npm install
npm start
```

–û—Ç–∫—Ä–æ–π: `http://localhost:3000`

–ï—Å–ª–∏ `3000` —É–∂–µ –∑–∞–Ω—è—Ç, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø—Ä–æ–±—É–µ—Ç `3001`, `3002` –∏ —Ç.–¥. (–¥–æ 10 –ø–æ–ø—ã—Ç–æ–∫).

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É:

```bash
PORT=4000 npm start
```

–ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ `PORT` –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –ø–æ–Ω—è—Ç–Ω–æ–π –æ—à–∏–±–∫–æ–π.

> –î–ª—è production –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–π—Ç–µ `ADMIN_KEY` —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## API

- `GET /api/users/:id` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `POST /api/topup` ‚Äî –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ `{ userId, currency: "ton"|"stars", amount }`.
- `POST /api/admin/grant` ‚Äî –∞–¥–º–∏–Ω-–≤—ã–¥–∞—á–∞ `{ adminKey, userId, ton, stars }`.
- `GET /api/game/round` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—â–µ–≥–æ —Ä–∞—É–Ω–¥–∞.
- `POST /api/game/bet` ‚Äî —Å–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É `{ userId, stake, currency, roundId }`.
- `POST /api/game/cashout` ‚Äî –∑–∞–±—Ä–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à `{ userId, roundId }`.
- `GET /api/game/bet/:userId` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç–∞–≤–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –¢–µ—Å—Ç—ã

```bash
npm test
```
